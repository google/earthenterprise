

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fusion issues &#8212; Google Earth Enterprise 5.3.5 documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Unsupported 3D geometry files" href="unsupported3DGeoFiles.html" />
    <link rel="prev" title="Fusion diagnostics" href="fusionDiagnostics.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="unsupported3DGeoFiles.html" title="Unsupported 3D geometry files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fusionDiagnostics.html" title="Fusion diagnostics"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Google Earth Enterprise 5.3.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../troubleshooting.html" accesskey="U">Troubleshooting and error messages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Fusion issues</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><a class="reference internal" href="../../_images/googlelogo_color_260x88dp12.png"><img alt="Google logo" src="../../_images/googlelogo_color_260x88dp12.png" style="width: 130px; height: 44px;" /></a></p>
<div class="section" id="fusion-issues">
<h1>Fusion issues<a class="headerlink" href="#fusion-issues" title="Permalink to this headline">¶</a></h1>
<div class="docutils container">
<div class="content docutils container">
<p>When you install GEE on a server, the software does a query for
<code class="docutils literal notranslate"><span class="pre">hostname</span> <span class="pre">-f</span></code>. Each time you build a resource, project, or
database on the Fusion server, the initial <code class="docutils literal notranslate"><span class="pre">hostname</span> <span class="pre">-f</span></code>
response is added to all the files in each asset’s subdirectory.
Changing the hostname or moving assets from one server to another
without updating the hostname in all places will make your Fusion
system inoperable. To safely change your hostname, follow the
instructions below.</p>
<p>To change the hostname for a production system (GEE Server only,
no Fusion):</p>
<ol class="arabic simple">
<li><p>Shut down the <code class="docutils literal notranslate"><span class="pre">geserver</span></code> daemon at
<code class="docutils literal notranslate"><span class="pre">/etc/init.d/geserver</span> <span class="pre">stop</span></code>.</p></li>
<li><p>Update the hostname and IP address to the correct entries for
the machine.</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">/opt/google/gehttpd/htdocs/intl/en/tips/tip*.html</span></code> and
update any hardcoded URLs to the new machine URL.</p></li>
<li><p>Remove the contents of <code class="docutils literal notranslate"><span class="pre">/gevol/published_dbs/stream_space</span></code>
and <code class="docutils literal notranslate"><span class="pre">/gevol/published_dbs/search_space</span></code>.</p></li>
<li><p>Change directory to <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> and execute
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">gepguser</span> <span class="pre">/opt/google/bin/geresetpgdb</span></code>.</p></li>
<li><p>Start the GEE Server: <code class="docutils literal notranslate"><span class="pre">/etc/init.d/geserver</span> <span class="pre">start</span></code>.</p></li>
</ol>
<p>To change the hostname for a development system (both Fusion and
GEE Server):</p>
<ol class="arabic">
<li><p>Shut down both the <code class="docutils literal notranslate"><span class="pre">gefusion</span></code> and <code class="docutils literal notranslate"><span class="pre">geserver</span></code> daemons:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/etc/init.d/gefusion stop
/etc/init.d/geserver stop
</pre></div>
</div>
</li>
<li><p>Update the hostname and IP address to the correct entries for
the machines.</p></li>
<li><p>If needed, edit the <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code> file to update the IP
address and hostname entries for the production machine.</p></li>
<li><p>Execute
<code class="docutils literal notranslate"><span class="pre">/opt/google/bin/geconfigureassetroot</span> <span class="pre">--fixmasterhost</span></code>.</p></li>
<li><p>Back up the following files to <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> or another archive
folder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/gevol/assets/.config/volumes.xml
/gevol/assets/.config/PacketLevel.taskrule
/gevol/assets/.userdata/serverAssociations.xml
/gevol/assets/.userdata/snippets.xml
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">assets</span></code> with the name of your asset root. For example, <code class="docutils literal notranslate"><span class="pre">/gevol/tutorial</span></code>.</p>
</li>
<li><p>Edit the <code class="docutils literal notranslate"><span class="pre">/gevol/assets/.userdata/snippets.xml</span></code> file and
update the hardcoded URLs to match the new hostname URL of the
production machine.</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">/opt/google/gehttpd/htdocs/intl/en/tips/tip*.html</span></code> and
update any hardcoded URLs to the new machine URL.</p></li>
<li><p>Remove the contents of <code class="docutils literal notranslate"><span class="pre">/gevol/published_dbs/stream_space</span></code>
and <code class="docutils literal notranslate"><span class="pre">/gevol/published_dbs/search_space</span></code>.</p></li>
<li><p>Change directory to <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> and execute</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">gepguser</span> <span class="pre">/opt/google/bin/geresetpgdb</span></code>.</p>
</li>
<li><p>Start the geserver and gefusion services:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/etc/init.d/geserver start
/etc/init.d/gefusion start
</pre></div>
</div>
<p>You can now change the server associations and publish the
databases.</p>
</li>
</ol>
<p>To change the server associations and publish the databases:</p>
<ol class="arabic simple">
<li><p>Log in to Fusion as a user (not as root) by entering <code class="docutils literal notranslate"><span class="pre">fusion</span></code>
on the command line.</p></li>
<li><p>Select <strong>Tools</strong> &gt; <strong>Server Associations Manager</strong>.</p></li>
<li><p>Edit the <code class="docutils literal notranslate"><span class="pre">default_ge</span></code> and <code class="docutils literal notranslate"><span class="pre">default_map</span></code>entries and update
the URL to match the hostname of the development machine.</p></li>
<li><p>Edit the remaining entries for the production server
associations and update the URL to the new production machine
URL, then close the Server Associations Manager.</p></li>
<li><p>Select <strong>Tools</strong> &gt; <strong>Asset Manager</strong>.</p></li>
<li><p>Navigate to the Databases folder, right-click <strong>3D database</strong>,
and select <strong>Publish</strong>.</p></li>
<li><p>From the <strong>Publish</strong> menu, select <strong>default_ge</strong> and publish to
the local development machine. Repeat for the production
machine.</p></li>
<li><p>Right-click <strong>2D database</strong> and select <strong>Publish</strong>.</p></li>
<li><p>From the <strong>Publish</strong> menu, select <strong>default_map</strong> and publish
to the local development machine. Repeat for the production
machine.</p></li>
</ol>
<p>To verify that the databases are published and working:</p>
<ol class="arabic simple">
<li><p>Connect a web browser to <code class="docutils literal notranslate"><span class="pre">http://production/default_map</span></code>.</p></li>
<li><p>Connect a web browser to <code class="docutils literal notranslate"><span class="pre">http://development/default_map</span></code>.</p></li>
<li><p>Connect GE Enterprise Client to <code class="docutils literal notranslate"><span class="pre">http://production</span></code>.</p></li>
<li><p>Connect GE Enterprise Client to <code class="docutils literal notranslate"><span class="pre">http://development</span></code>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During testing, you can check
<code class="docutils literal notranslate"><span class="pre">/opt/google/gehttpd/logs/access_log</span></code> and <code class="docutils literal notranslate"><span class="pre">error_log</span></code> to
determine if any errors are reported by Apache.</p>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="fusionDiagnostics.html"
                        title="previous chapter">Fusion diagnostics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="unsupported3DGeoFiles.html"
                        title="next chapter">Unsupported 3D geometry files</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="unsupported3DGeoFiles.html" title="Unsupported 3D geometry files"
             >next</a> |</li>
        <li class="right" >
          <a href="fusionDiagnostics.html" title="Fusion diagnostics"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Google Earth Enterprise 5.3.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../troubleshooting.html" >Troubleshooting and error messages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Fusion issues</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Open GEE Contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.1.
    </div>
  </body>
</html>