
Operating System Settings That May Affect Fusion

The Linux operating system implements several limits that may prevent
Fusion processes from running correctly, particularly when building
large projects or databases. To avoid this problem, run the steps
below on all of your Fusion servers.

The numbers used in the settings below are recommendations that should
work in most cases. You may want to adjust these numbers based on your
environment and workflow.

Edit /etc/sysctl.conf and insert the following lines:

      fs.file-max=1048576
      vm.max_map_count=1000000

   "fs.file-max" should be at least the number of resources in your
   largest project, plus some extra to allow for the additional files
   Fusion uses. "vm.max_map_count" should be more than twice the
   number of resources in your largest project.

Edit /etc/security/limits.conf and insert the following lines:

      gefusionuser soft nofile 1048576
      gefusionuser hard nofile 1048576

      gefusionuser soft nproc 65535
      gefusionuser hard nproc 65535

   Use the same number of files here that you used in the previous
   step. The number of processes must be significantly greater than
   the number of cores. Fusion uses one process per core plus two more
   for the system manager and resource provider; however, the process
   limit should be considerably larger to account for operating system
   processes.

Remove these lines from /etc/security/limits.conf if they are present:

      * hard memlock 529426432
      * soft memlock 529426432

If necessary, modify the following line in the start() function of
/etc/init.d/gefusion:

      ulimit -n 500000

   Set this to the same number of files you used in the previous
   steps. If the existing value is sufficiently large, no change is
   necessary.

Reboot your Fusion servers.
