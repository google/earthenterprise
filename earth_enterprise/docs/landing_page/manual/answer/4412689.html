<!DOCTYPE html> <html> <head> <meta charset="UTF-8"/>
<title>Segmenting Large Imagery Files</title>
<link rel="stylesheet" href="../css/styles.css" type="text/css" media="all" /> <link rel="stylesheet" href="../css/containers.css" type="text/css" media="all" /> </head> <body>
<!-- 4412689.html -->
<div class="container">
  <div class="sidebar1">
<p class="sidebar-toc"><a href="../answer/4412440.html">About This Tutorial</a></p>
<p class="sidebar-toc"><a href="../answer/4412441.html">Setting Up the Tutorial</a></p>
<p class="sidebar-toc"><a href="../answer/4412443.html">Defining and Building Resources</a></p>
<p class="sidebar-toc"><a href="../answer/4412421.html">Defining and Building Projects</a></p>
<p class="sidebar-toc"><a href="../answer/4412422.html">Defining and Building Databases</a></p>
<p class="sidebar-toc"><a href="../answer/4412446.html">Pushing, Publishing, and Viewing a Database</a></p>
<p class="sidebar-toc"><a href="../answer/4412447.html">Configuring Display Rules for Point Data</a></p>
<p class="sidebar-toc"><a href="../answer/4412681.html">Configuring Display Rules for Polygon Data</a></p>
<p class="sidebar-toc"><a href="../answer/4412449.html">Importing and Exporting Style Templates</a></p>
<p class="sidebar-toc"><a href="../answer/4412684.html">Specifying Search Fields for Individual Layers</a></p>
<p class="sidebar-toc"><a href="../answer/4412683.html">Configuring a Searchable Database</a></p>
<p class="sidebar-toc"><a href="../answer/4412455.html">Creating a Map Database</a></p>
<p class="sidebar-toc"><a href="../answer/4412688.html">Creating Imagery Mosaics</a></p>
<p class="sidebar-toc"><a href="../answer/4412689.html" class="current-file">Segmenting Large Imagery Files</a></p>
<p class="sidebar-toc"><a href="../answer/4412458.html">Building a Historical Imagery Project</a></p>
<p class="sidebar-toc"><a href="../answer/4412690.html">Sample Data Files</a></p>
<p class="sidebar-toc"><a href="../answer/6028272.html">Configure tutorial workspace</a></p>
  </div>
  <div class="content">
<a name="top_of_file"></a>
<p><img src="../art/common/googlelogo_color_260x88dp.png" width="130" height="44" alt="Google logo" /></p>
<h1><a href="../index.html">Google Earth Enterprise Documentation Home</a> | Fusion tutorial</h1>
<h2>Segmenting Large Imagery Files</h2>
<p>Google Earth Enterprise Fusion does not allow you to import raw imagery source files larger than 80 GB. (Raw size = number of pixels width * number of pixels height * 3.) Therefore, if you have an imagery source file that is larger than 80GB, you can split it into two or more source files using the <code>gesplitkhvr</code> command.
</p>
<p>The <code>gesplitkhvr</code> tool produces a grid of image files designated as rows and columns. For example, if you specify 2 rows and 2 columns, the image is split into four smaller files. If you create a separate resource for each resulting source file, it would look like this in the Preview pane:
</p>
<img alt="Split Image" src="../art/fusion/tutorial/splitImage.png"/>
<p>However, you can reconnect the split images by adding them all to a single resource, which would look like this in the Preview pane:
</p>
<img alt="Split Images Reconnected Into a Single Resource" src="../art/fusion/tutorial/splitImageSingleRes.png"/>
<h5>To split a large source file into multiple smaller files:
</h5>
<ol class="spaced-list">
<li><p>At the command prompt, change to the folder that contains the tutorial imagery source files by entering:</p>
<p><code>cd /opt/google/share/tutorials/fusion/Imagery</code></p>
</li>
<li><p><a name="71755"></a>Convert a <code>.tif</code> file to a <code>.khvr</code> file by entering:</p>
<p><code>gevirtualraster -o <em>path</em>/virtual_raster.khvr usgsSFHiRes.tif</code></p>
<p>where <em>path</em> is the path to the folder where you want to save the resulting <code>.khvr</code> file. (See <a href="../answer/4412688.html"><em>Creating Imagery Mosaics</em></a> for more information about the <code>gevirtualraster</code> tool.)
</p>
<div class="note"><p><strong>Note:</strong> The path where you save the resulting <code>.khvr</code> file must be on a known volume. (See “<code>geconfigureassetroot --editvolumes</code>” in the <a href="../answer/3481558.html">Command reference</a>.)
</p></div>
</li>
<li><p>Change to the folder where you stored the virtual_raster.khvr (the value of <em>path</em> in step <a href="#71755">2</a>) by entering:</p>
<p><code>cd <em>path</em></code></p>
</li>
<li><p>Split the <code>.khvr</code> file into a 4x4 grid (16 image files) with a 10-pixel overlap among all of the files by entering:</p>
<p><code>gesplitkhvr --rows 4 --cols 4 --overlap 10 virtual_raster.khvr</code></p>
<p>The names of the resulting files appear on the screen as they are created. The file names are constructed from the name of the original file (<code>virtual_raster</code>), a row and column designation for each file (starting with <code>-R1C3</code>), and the <code>.khvr</code> extension.
</p>
</li>
</ol>
<p>Now you can import the 16 resulting image files into a resource.
</p><div class="footer"><p class="BackToTop"><a href="#top_of_file">Back to top</a> <hr /></p> <p class="copyright">&copy;2015 Google</p></div>
</div></body> </html>
